# 快速上手指南 (5分钟)

## 🎯 目标
使用 QEMU 创建一个难以被检测的虚拟机，并自定义所有硬件参数。

---

## ⚡ 3 步快速开始

### 步骤 1: 安装 QEMU (2分钟)

**Ubuntu/Debian:**
```bash
sudo apt update && sudo apt install qemu-system-x86 qemu-utils -y
```

**macOS:**
```bash
brew install qemu
```

**验证安装:**
```bash
qemu-system-x86_64 --version
```

---

### 步骤 2: 创建虚拟机 (1分钟)

**赋予脚本执行权限:**
```bash
chmod +x *.sh
```

**启动 Windows 虚拟机:**
```bash
./create-windows-vm.sh
```

**或启动 Linux 虚拟机:**
```bash
./create-linux-vm.sh
```

> 💡 首次运行会自动创建磁盘镜像

---

### 步骤 3: 验证配置 (2分钟)

**在虚拟机内运行检测脚本:**

**Windows (PowerShell):**
```powershell
.\test-vm-detection-windows.ps1
```

**Linux (Bash):**
```bash
sudo ./test-vm-detection-linux.sh
```

---

## 🎨 自定义硬件参数

### 方法 1: 使用随机生成器
```bash
./generate-hardware-params.sh
```
复制生成的参数到 `create-windows-vm.sh` 或 `create-linux-vm.sh`

### 方法 2: 手动编辑
编辑 `create-windows-vm.sh` 文件:
```bash
# 修改这些变量
SYSTEM_MANUFACTURER="ASUS"
SYSTEM_PRODUCT="ROG STRIX B550-F GAMING"
SYSTEM_SERIAL="SYS20210812001"
HDD_SERIAL="WD-WCAV29472851"
MAC_ADDRESS="00:1B:21:3A:4F:5C"
```

---

## 📋 常见任务

### 安装操作系统
编辑启动脚本，取消注释:
```bash
# -cdrom windows.iso \
# -boot d \
```

### 端口转发 (远程访问)
已预配置:
- SSH: `localhost:2222` → 虚拟机 `22`
- RDP: `localhost:3389` → 虚拟机 `3389`

连接示例:
```bash
# SSH 连接
ssh user@localhost -p 2222

# RDP 连接
mstsc /v:localhost:3389
```

### 虚拟机管理
```bash
./vm-manager.sh list              # 列出虚拟机
./vm-manager.sh create            # 创建新虚拟机
./vm-manager.sh start myvm        # 启动虚拟机
./vm-manager.sh info myvm         # 查看信息
./vm-manager.sh snapshot-create myvm backup1  # 创建快照
```

---

## ❓ 常见问题

### Q: 虚拟机启动很慢？
**A:** 确保启用了硬件加速:
- Linux: 检查 `/dev/kvm` 是否存在
- macOS: 自动使用 HVF
- 查看启动日志确认使用了 KVM/HVF

### Q: 仍然被检测为虚拟机？
**A:** 运行检测脚本找出问题:
```bash
./test-vm-detection-linux.sh
```
根据失败项调整配置

### Q: 如何更改虚拟机内存/CPU？
**A:** 编辑启动脚本:
```bash
MEMORY="8192"  # 改为你需要的内存 (MB)
CPU_CORES="4"  # 改为你需要的核心数
```

### Q: 网络无法连接？
**A:** 检查:
1. 防火墙设置
2. 端口是否被占用
3. 尝试使用桥接模式

---

## 📚 下一步

- 📖 阅读 [完整配置指南](QEMU虚拟机配置指南.md)
- 📊 查看 [速查表](速查表.md)
- ✅ 查看 [功能验证报告](项目功能验证报告.md)

---

## 🆘 需要帮助？

1. 查看 [README.md](README.md)
2. 查看 [QEMU虚拟机配置指南.md](QEMU虚拟机配置指南.md)
3. 运行 `./vm-manager.sh help`

---

**恭喜！你已经掌握了基本使用方法！** 🎉
